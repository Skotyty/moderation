# Система управления объявлениями для модерации

Веб-приложение для модерации объявлений платформы Авито. Тестовое задание для стажировки Frontend разработчика (осенняя волна 2025).

## Что реализовано

### Основные требования

**1. Страница списка объявлений (/list)**
- Карточки объявлений с изображением, названием, ценой, категорией, датой, статусом и приоритетом
- Фильтрация по статусу (множественный выбор), категории, диапазону цен
- Поиск по названию
- Сортировка по дате, цене и приоритету
- Пагинация по 10 объявлений на страницу
- Сброс фильтров

**2. Страница детального просмотра (/item/:id)**
- Галерея из 3+ изображений с навигацией
- Полное описание товара
- Таблица характеристик
- Информация о продавце (имя, рейтинг, количество объявлений, дата регистрации)
- История модерации (кто проверял, когда, решение, комментарий)
- Панель действий: одобрить, отклонить, вернуть на доработку
- При отклонении: обязательное поле причины с шаблонами (запрещённый товар, неверная категория, некорректное описание, проблемы с фото, подозрение на мошенничество, другое)
- Навигация: кнопка "Назад к списку", кнопки "Предыдущее/Следующее объявление"

**3. Страница статистики (/stats)**
- Карточки метрик: всего проверено, процент одобренных/отклоненных, среднее время проверки
- График активности по дням (столбчатая диаграмма)
- Круговая диаграмма распределения решений
- График по категориям проверенных объявлений

### Дополнительные возможности

- Горячие клавиши: A (одобрить), D (отклонить), стрелки (навигация), / (фокус на поиск)
- Bulk-операции: выбор нескольких объявлений, массовое одобрение/отклонение
- Сохранение наборов фильтров в localStorage
- URL-синхронизация фильтров (можно поделиться ссылкой)
- Тёмная тема с сохранением в localStorage
- Экспорт статистики в CSV и PDF
- Real-time обновления списка объявлений каждые 30 секунд
- Плавные анимации и переходы между страницами
- Фильтр по периоду на странице статистики (сегодня/7 дней/30 дней)

## Технологический стек

**Frontend**
- React 19.2
- TypeScript 5.9
- Vite 7.2 (система сборки)
- React Router DOM 7.9 (маршрутизация)
- TanStack React Query 5.90 (управление запросами и автоматическая отмена при размонтировании)
- Zustand 5.0 (state management)
- Axios 1.13 (HTTP клиент)
- TailwindCSS 3.4 (стилизация)
- Recharts 3.4 (графики)
- Framer Motion 12.23 (анимации)
- jsPDF 3.0 (генерация PDF)
- date-fns 4.1 (работа с датами)

**Качество кода**
- ESLint (линтер)
- Prettier (форматирование)
- Vitest + Testing Library (тестирование)

**DevOps**
- Docker + Docker Compose
- Nginx (веб-сервер для продакшена)

## Требования

- Node.js v20+
- npm 9+
- Docker (опционально)

## Запуск проекта

### Вариант 1: Локальный запуск

**Запуск backend сервера:**

```bash
cd tech-int3-server
npm install
npm start
```

Сервер будет доступен на http://localhost:3001

**Запуск frontend клиента (в новом терминале):**

```bash
cd client
npm install
npm run dev
```

Приложение будет доступно на http://localhost:3000

### Вариант 2: Docker Compose

```bash
docker compose up --build
```

После запуска:
- Frontend: http://localhost:3000
- Backend API: http://localhost:3001

## Доступные команды

```bash
# В директории client/

# Запуск dev-сервера
npm run dev

# Сборка для продакшена
npm run build

# Просмотр продакшен-сборки
npm run preview

# Линтинг
npm run lint

# Форматирование кода
npm run format

# Запуск тестов
npm run test

# Запуск тестов с UI
npm run test:ui
```

## Структура проекта

```
avito_testovoe/
├── client/                    # Frontend приложение
│   ├── src/
│   │   ├── api/              # API клиенты (ads, stats, moderator)
│   │   ├── components/
│   │   │   ├── ui/          # UI компоненты (Button, Card, Input, Modal и др.)
│   │   │   └── layout/      # Layout компоненты (Header, Layout)
│   │   ├── pages/
│   │   │   ├── list/        # Страница списка объявлений
│   │   │   ├── item/        # Страница детального просмотра
│   │   │   └── stats/       # Страница статистики
│   │   ├── hooks/           # React Query хуки (useAds, useStats, useHotkeys)
│   │   ├── store/           # Zustand stores (theme, selection, filters)
│   │   ├── types/           # TypeScript типы
│   │   ├── lib/             # Утилиты
│   │   └── utils/           # Вспомогательные функции
│   ├── Dockerfile
│   ├── nginx.conf
│   └── package.json
├── tech-int3-server/         # Backend API (готовый сервер)
│   ├── src/
│   ├── server.js
│   └── schema.yaml          # OpenAPI спецификация
├── docker-compose.yml
└── README.md
```

## API эндпоинты

**Объявления:**
- GET /api/v1/ads - получить список объявлений с фильтрацией
- GET /api/v1/ads/:id - получить объявление по ID
- POST /api/v1/ads/:id/approve - одобрить объявление
- POST /api/v1/ads/:id/reject - отклонить объявление
- POST /api/v1/ads/:id/request-changes - запросить изменения

**Статистика:**
- GET /api/v1/stats/summary - общая статистика
- GET /api/v1/stats/chart/activity - график активности
- GET /api/v1/stats/chart/decisions - график решений
- GET /api/v1/stats/chart/categories - график категорий

**Модератор:**
- GET /api/v1/moderators/me - информация о текущем модераторе

## Горячие клавиши

| Клавиша | Действие |
|---------|----------|
| A | Одобрить объявление |
| D | Отклонить объявление |
| → | Следующее объявление |
| ← | Предыдущее объявление |
| / | Фокус на поиск |

## Обоснование выбора технологий

**Vite** - быстрый dev-сервер с мгновенным hot reload и оптимизированная production сборка, из коробки поддерживает TypeScript.

**React Query** - автоматическое управление кешем, отмена запросов при размонтировании компонентов (требование задания), меньше boilerplate по сравнению с Redux.

**Zustand** - минимальный API, нет Provider hell, отличная TypeScript поддержка, встроенный persist middleware для сохранения в localStorage.

**TailwindCSS** - высокая скорость разработки, меньше размер bundle (только используемые классы), consistent дизайн, отличная поддержка темной темы.

**Recharts** - declarative API идеально подходит для React, responsive charts из коробки, легко кастомизировать.

## Тестирование

Проект покрыт unit-тестами с использованием Vitest и Testing Library.

Статистика:
- 174 теста в 15 файлах
- UI компоненты: 70 тестов
- Zustand stores: 29 тестов
- API клиенты: 22 теста
- Утилиты: 42 теста
- React hooks: 11 тестов

## Production Ready

Проект готов к развертыванию:
- Docker контейнеризация
- Nginx для статики
- Оптимизированная production сборка
- Gzip компрессия
- Кеширование статических ресурсов
- TypeScript для type safety
- ESLint + Prettier
- Unit тесты

## Автор

Тестовое задание для стажировки Frontend разработчика в Авито (осенняя волна 2025)
